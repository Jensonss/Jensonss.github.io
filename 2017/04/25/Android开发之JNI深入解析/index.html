<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Android," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="说在前面的话 本来是没有打算写JNI的，因为本来是在看Binder机制原理的，但是看着看着就跑偏看到了JNI。。。   通过本章可以了解到这些： jni介绍 为什么要学习jni jni使用流程是怎样的 如何Java调用C 如何C调用Java 源码和讲解穿插说明  进入正题：  什么是jni、ndkjni(java native interface)，Java本地接口。在Java中接口就是一套协议标">
<meta name="keywords" content="Android">
<meta property="og:type" content="article">
<meta property="og:title" content="Android开发之JNI深入解析">
<meta property="og:url" content="http://yoursite.com/2017/04/25/Android开发之JNI深入解析/index.html">
<meta property="og:site_name" content="Jenson">
<meta property="og:description" content="说在前面的话 本来是没有打算写JNI的，因为本来是在看Binder机制原理的，但是看着看着就跑偏看到了JNI。。。   通过本章可以了解到这些： jni介绍 为什么要学习jni jni使用流程是怎样的 如何Java调用C 如何C调用Java 源码和讲解穿插说明  进入正题：  什么是jni、ndkjni(java native interface)，Java本地接口。在Java中接口就是一套协议标">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/1796052-84c9b4e1a9ccfc4e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/1796052-807a4e3b92ae00a6.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/1796052-062e7ea6f0c17ef3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/1796052-a4792879d689f210.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/1796052-163651037bed302a.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://yoursite.com/Users/jenson/Desktop/屏幕快照%202017-04-24%20下午9.57.43.png">
<meta property="og:image" content="http://yoursite.com/Users/jenson/Desktop/屏幕快照%202017-04-24%20下午10.29.17.png">
<meta property="og:image" content="http://yoursite.com/Users/jenson/Desktop/屏幕快照%202017-04-24%20下午11.04.06.png">
<meta property="og:image" content="http://yoursite.com/Users/jenson/Desktop/屏幕快照%202017-04-24%20下午11.14.36.png">
<meta property="og:image" content="http://yoursite.com/Users/jenson/Desktop/屏幕快照%202017-04-25%20上午12.26.47.png">
<meta property="og:image" content="http://yoursite.com/Users/jenson/Desktop/屏幕快照%202017-04-24%20下午11.57.46.png">
<meta property="og:updated_time" content="2017-04-24T16:57:27.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android开发之JNI深入解析">
<meta name="twitter:description" content="说在前面的话 本来是没有打算写JNI的，因为本来是在看Binder机制原理的，但是看着看着就跑偏看到了JNI。。。   通过本章可以了解到这些： jni介绍 为什么要学习jni jni使用流程是怎样的 如何Java调用C 如何C调用Java 源码和讲解穿插说明  进入正题：  什么是jni、ndkjni(java native interface)，Java本地接口。在Java中接口就是一套协议标">
<meta name="twitter:image" content="http://upload-images.jianshu.io/upload_images/1796052-84c9b4e1a9ccfc4e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/04/25/Android开发之JNI深入解析/"/>





  <title>Android开发之JNI深入解析 | Jenson</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jenson</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">面向对象面向君，不负代码不负卿</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/25/Android开发之JNI深入解析/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jenson">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jenson">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Android开发之JNI深入解析
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-25T00:55:54+08:00">
                2017-04-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="说在前面的话"><a href="#说在前面的话" class="headerlink" title="说在前面的话"></a>说在前面的话</h1><blockquote>
<p>本来是没有打算写JNI的，因为本来是在看Binder机制原理的，但是看着看着就跑偏看到了JNI。。。</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/1796052-84c9b4e1a9ccfc4e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="日了狗.jpg"></p>
<h1 id="通过本章可以了解到这些："><a href="#通过本章可以了解到这些：" class="headerlink" title="通过本章可以了解到这些："></a>通过本章可以了解到这些：</h1><ul>
<li>jni介绍</li>
<li>为什么要学习jni</li>
<li>jni使用流程是怎样的</li>
<li>如何Java调用C</li>
<li>如何C调用Java</li>
<li>源码和讲解穿插说明</li>
</ul>
<p>进入正题：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1796052-807a4e3b92ae00a6.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="开始表演.jpeg"></p>
<h1 id="什么是jni、ndk"><a href="#什么是jni、ndk" class="headerlink" title="什么是jni、ndk"></a>什么是jni、ndk</h1><p>jni(java native interface)，Java本地接口。在Java中接口就是一套协议标准，同样这里也是如此，jni是一套让Java和C互通有无的一套标准。看到这脑子里应该有个大概情况：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1796052-062e7ea6f0c17ef3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="屏幕快照 2017-04-21 下午12.17.32.png"><br>ndk,它只是一套开发工具集，如果再给它加个形容词，那就是本地开发工具集，即Native Development Kit。</p>
<blockquote>
<p>注意区别ndk和jni，一个是一套软件，一个是套标准。</p>
</blockquote>
<h1 id="为什么使用jni"><a href="#为什么使用jni" class="headerlink" title="为什么使用jni"></a>为什么使用jni</h1><ul>
<li><p>1、效率问题</p>
<p>C和C++效率比Java要高一些，虽然这种差距随着Java性能优化有越来越小的趋势，但是总归还是存在的。</p>
</li>
<li><p>2、安全问题</p>
<p>虽然没有绝对的安全，但是相对来说C语言的反汇编比Java更不容易看懂</p>
</li>
<li><p>3、代码复用</p>
<p>C语言年代久远，有很多现成的库，如果Java需要使用同样的功能，不需要自己从新实现，jni直接调用库即可。</p>
</li>
</ul>
<h1 id="jni步骤流程"><a href="#jni步骤流程" class="headerlink" title="jni步骤流程"></a>jni步骤流程</h1><p>就像使用Java类要先加载类文件一样，要使用jni，首先要加载类库，然后通过Java层方法调用Native层方法。调用流程如下：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1796052-a4792879d689f210.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="屏幕快照 2017-04-21 下午1.29.01.png"></p>
<p>上面是调用流程，调用的前提是先完成开发，也就是说开发流程是要先完成Java层方法和Native层方法。</p>
<p>基础介绍的差不多了，下面开始进入实际开发部分：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1796052-163651037bed302a.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="皮皮鳝.jpeg"></p>
<h1 id="Java调用C"><a href="#Java调用C" class="headerlink" title="Java调用C"></a>Java调用C</h1><p>学习最好的方法就是看代码，那么我们就看看系统一个简单的jni使用示例：Log打印系统。</p>
<h2 id="看看Log打印系统是如何Java调用C"><a href="#看看Log打印系统是如何Java调用C" class="headerlink" title="看看Log打印系统是如何Java调用C"></a>看看Log打印系统是如何Java调用C</h2><p>首先我们看下Log.java的源码才好下手。</p>
<h3 id="简单介绍Log-java源码"><a href="#简单介绍Log-java源码" class="headerlink" title="简单介绍Log.java源码"></a>简单介绍Log.java源码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">public static int i(String tag, String msg, Throwable tr) &#123;</div><div class="line">    return println_native(LOG_ID_MAIN, INFO, tag, msg + &apos;\n&apos; + getStackTraceString(tr));</div><div class="line">&#125;</div><div class="line"></div><div class="line">public static int w(String tag, String msg) &#123;</div><div class="line">    return println_native(LOG_ID_MAIN, WARN, tag, msg);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>可以看出真正的打印是在 <figure class="highlight plain"><figcaption><span>方法中，而这个方法是一个本地方法：</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure></p>
<p>/<em>* @hide </em>/ public static native int println_native(int bufID,int priority, String tag, String msg);</p>
<p>public static native boolean isLoggable(String tag, int level);<br>```</p>
<blockquote>
<p>原来JNI中Java层的实现这么简单，只需要声明一个native修饰的方法，传入必须的参数就行了。</p>
</blockquote>
<p>下面研究中心要转移到native层实现了，源码那么多如何找到native实现呢？</p>
<h3 id="Native层源码探究"><a href="#Native层源码探究" class="headerlink" title="Native层源码探究"></a>Native层源码探究</h3><ul>
<li><p>查找Native层实现</p>
<p>Java层和Native层之间源码是有对应规律的。</p>
<p>Native实现文件命名为：Java全类名(下划线作分隔符)</p>
<p>Native实现方法命名为：Java_为前缀+全类名(下划线作分隔符)+方法名</p>
<p>例如 Log类全类名为android.util.Log，其对应的Native文件名称应该为android_util_Log。我们试下：</p>
<p><img src="/Users/jenson/Desktop/屏幕快照 2017-04-24 下午9.57.43.png" alt="屏幕快照 2017-04-24 下午9.57.43"></p>
<p>果真找到了，下面开始探究源码：</p>
</li>
<li><p>Native源码开扒</p>
<p>我们首先找到Java层println_native方法Native层的实现，按照上面的命名规范，没有找到 <code>Java_android_util_Log_println_native</code>但是却找到了这个方法：<code>android_util_Log_println_native</code> ，看来Android系统级的JNI没有遵循规范啊。不过没关系，<em>只要记住JNI有两种方式：一种是遵守JNI命名规范的日常使用方法，另一种是是这种系统级JNI没有Java_前缀就行了</em> 。不影响我们看代码：</p>
<p><img src="/Users/jenson/Desktop/屏幕快照 2017-04-24 下午10.29.17.png" alt="屏幕快照 2017-04-24 下午10.29.17"></p>
<p>可以看出该方法代码比较少，因为我们是研究JNI，而不是研究Log如何打印，所以方法中对于其他方法调用不再深入研究，但是看到这参数时心里产生了几个疑问：</p>
<p>①JNIENV和jobject都是什么鬼？</p>
<p>②后面几个参数和我们Java层传的参数相似又不是，为什么呢？这里的几个参数和Java层的参数有什么关系？</p>
<p>③如何根据Java层方法找到对应的Native方法的，换句话说双方各自的方法如何对应上的呢？</p>
<p>下面我一一来分析，先从第三个开始：</p>
</li>
<li><p>Java和Native双方的方法如何对上眼的</p>
<p>在该文件中有这样一个方法<code>register_android_util_Log</code> ，我们看下实现：</p>
<p><img src="/Users/jenson/Desktop/屏幕快照 2017-04-24 下午11.04.06.png" alt="屏幕快照 2017-04-24 下午11.04.06"></p>
<p>前面大部分代码给我的第一感觉就是：这么TM和Java的反射好像啊！难道是C++版反射？反正意思就是通过Java的Log类拿到该类的几个变量(C语言中习惯称为域)</p>
<p>看最后一行调用了AndroidRunTime的方法，顾名思义是注册本地方法，其中参数<code>gMethods</code> 值得一看：</p>
<p><img src="/Users/jenson/Desktop/屏幕快照 2017-04-24 下午11.14.36.png" alt="屏幕快照 2017-04-24 下午11.14.36"></p>
<p>这是一个静态结构体数组，这个比较有意思，看注释可以看出大括弧的三个元素分别是名称、签名和函数指针。而名称恰恰是Java里面声明的本地方法，签名是本地方法的签名，函数指针指向的是Native实现方法。一个数组就把Java方法和Native方法给关联起来了。因为Java支持方法重载，为了确保调用的唯一性，于是就有了方法签名，下面说说方法签名机制：</p>
<p>首先看下签名规则：</p>
<p>| Java类型  | 类型签名    |<br>| ——- | ——- |<br>| boolean | Z       |<br>| byte    | B       |<br>| char    | C       |<br>| long    | J       |<br>| float   | F       |<br>| double  | D       |<br>| short   | S       |<br>| int     | I       |<br>| 其他类     | L全类名;   |<br>| 数组      | [元素类型签名 |</p>
<blockquote>
<p>注意：方法签名格式分为两部分：参数类型签名+返回值类型签名，类型签名之间没有空格，其中参数类型签名使用()括起来，有多少参数就有多少参数类型签名，格式为： <em>(参数1类型签名参数n类型签名)返回值类型签名</em> ,注意全类名用”/“分隔。</p>
</blockquote>
<p>拿<code>boolean isLoggable(String tag, int level)</code> 举例来说其方法签名为<code>(Ljava/lang/String;I)Z</code> 。</p>
<p>说完了方法签名规则，我们继续，既然 <code>register_android_util_Log</code> 方法里把双方方法进行了关联，那么该方法又是啥时候调用的呢？</p>
<p>且看<code>AndroidRunTime</code> :</p>
<p><img src="/Users/jenson/Desktop/屏幕快照 2017-04-25 上午12.26.47.png" alt="屏幕快照 2017-04-25 上午12.26.47"></p>
<p>该文件中声明了 <code>namespace</code> ，而后又调用了 <code>using namespace android ;</code> 而namespace中又调用了函数<code>register_android_util_Log</code> ，extern关键字就是告诉我们调用的方法来自外部文件。</p>
<p>说完了方法签名规则，我们继续<code>AndroidRunTime::registerNativeMethods</code> 这个方法看下：</p>
<p><img src="/Users/jenson/Desktop/屏幕快照 2017-04-24 下午11.57.46.png" alt="屏幕快照 2017-04-24 下午11.57.46"></p>
<p>这里又是一个包工头方法，承揽了方法自己不实现，总是调用别人的。<code>jniRegisterNativeMethods</code> 方法是在JniHelp.cpp中实现的，</p>
<p>接下来看之前的第二个问题：</p>
</li>
<li><p>Java类型和Native类型如何对应的</p>
<p>首先看下基本类型的对应关系：</p>
<p>| Java类型  | JNI类型    | 字长   |<br>| ——- | ——– | —- |<br>| boolean | jboolean | 8位   |<br>| byte    | jbyte    | 8位   |<br>| char    | jchar    | 16位  |<br>| short   | jshort   | 16位  |<br>| int     | jint     | 32位  |<br>| long    | jlong    | 64位  |<br>| float   | jfloat   | 32位  |<br>| double  | jdouble  | 64位  |<br>| void    | void     |      |</p>
<p>​</p>
<p>​</p>
</li>
<li><p>JNIENV和jobject都是什么鬼</p>
<p>​</p>
</li>
</ul>
<h2 id="看看我们常规的Java如何调用C"><a href="#看看我们常规的Java如何调用C" class="headerlink" title="看看我们常规的Java如何调用C"></a>看看我们常规的Java如何调用C</h2><h1 id="C调用Java"><a href="#C调用Java" class="headerlink" title="C调用Java"></a>C调用Java</h1><h1 id="深入剖析JNi"><a href="#深入剖析JNi" class="headerlink" title="深入剖析JNi"></a>深入剖析JNi</h1><ul>
<li>jni如何根据Java方法找到对应的native方法的？<br>方法签名</li>
<li>传的init，String参数到了jni怎么就成了jnit，jstring了？<br>数据类型转换<br>基本类型<br>引用类型</li>
<li><p>JNIEnv是什么鬼？</p>
</li>
<li><p>jobject是什么鬼？<br>操作Java对象，访问其域和方法<br>引用问题</p>
</li>
<li><p>jni异常如何处理？</p>
</li>
</ul>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Android/" rel="tag"># Android</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/04/23/30分钟搭建自己的网站/" rel="prev" title="Hexo+GitHub 30分钟拥有属于自己的网站">
                Hexo+GitHub 30分钟拥有属于自己的网站 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Jenson" />
          <p class="site-author-name" itemprop="name">Jenson</p>
           
              <p class="site-description motion-element" itemprop="description">Android Java Python C C++</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">23</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#说在前面的话"><span class="nav-number">1.</span> <span class="nav-text">说在前面的话</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#通过本章可以了解到这些："><span class="nav-number">2.</span> <span class="nav-text">通过本章可以了解到这些：</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#什么是jni、ndk"><span class="nav-number">3.</span> <span class="nav-text">什么是jni、ndk</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#为什么使用jni"><span class="nav-number">4.</span> <span class="nav-text">为什么使用jni</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#jni步骤流程"><span class="nav-number">5.</span> <span class="nav-text">jni步骤流程</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Java调用C"><span class="nav-number">6.</span> <span class="nav-text">Java调用C</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#看看Log打印系统是如何Java调用C"><span class="nav-number">6.1.</span> <span class="nav-text">看看Log打印系统是如何Java调用C</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#简单介绍Log-java源码"><span class="nav-number">6.1.1.</span> <span class="nav-text">简单介绍Log.java源码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Native层源码探究"><span class="nav-number">6.1.2.</span> <span class="nav-text">Native层源码探究</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#看看我们常规的Java如何调用C"><span class="nav-number">6.2.</span> <span class="nav-text">看看我们常规的Java如何调用C</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#C调用Java"><span class="nav-number">7.</span> <span class="nav-text">C调用Java</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#深入剖析JNi"><span class="nav-number">8.</span> <span class="nav-text">深入剖析JNi</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jenson</span>
</div>



        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

</body>
</html>
